{"version":3,"file":"js/688.c2d319b5.js","mappings":"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","sources":["webpack://hello-world/./src/views/Front/UserProductList.vue","webpack://hello-world/./src/views/Front/UserProductList.vue?b7cd"],"sourcesContent":["<template>\n  <LoadingOverlay :active=\"isLoading\" :loader=\"'dots'\" />\n  <header class=\"p-5 text-center header-background bg\">\n    <h1 class=\"display-1 fw-bold\">Products</h1>\n  </header>\n  <div class=\"container py-lg-5\">\n    <div class=\"row mx-0\">\n      <div class=\"col-lg-3 gy-4\">\n        <div class=\"sticky-top\" style=\"top: 96px\">\n          <div class=\"list-group d-md-block border-0\">\n            <a\n              href=\"#\"\n              class=\"list-group-item list-group-item-action border-0 rounded-5 mb-2 list-group-item-secondary\"\n              :class=\"{ active: selectedTitle === key }\"\n              v-for=\"(value, key) in productsCategory\"\n              :key=\"'value' + key\"\n              @click.prevent=\"selectedCategory(key)\"\n            >\n              {{ key === 'All' ? '全部商品' : key }} ({{ value }})\n            </a>\n          </div>\n        </div>\n      </div>\n      <div class=\"row col-lg-9 mx-0\">\n        <div class=\"col-lg-4 g-4\" v-for=\"item in products\" :key=\"item.id\">\n          <router-link\n            :to=\"{ path: `/user/product/${item.id}` }\"\n            class=\"card border-0 shadow card-hover\"\n          >\n            <img\n              :src=\"item.imageUrl\"\n              class=\"card-img-top img-fluid object-fit-cover vh-30\"\n              :alt=\"item.title\"\n            />\n\n            <div class=\"card-body\">\n              <h5 class=\"card-title\">{{ item.title }}</h5>\n              <p class=\"card-text\">{{ item.category }}</p>\n              <div class=\"d-flex\">\n                <span class=\"card-text align-self-center\">\n                  NT${{ $filters.currency(item.price) }}\n                </span>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-light ms-auto\"\n                  @click.prevent=\"addToFavorite(item)\"\n                >\n                  <i\n                    class=\"bi\"\n                    :class=\"\n                      favoriteID.includes(item.id)\n                        ? 'bi-heart-fill'\n                        : 'bi-heart'\n                    \"\n                  ></i>\n                </button>\n                <button\n                  type=\"button\"\n                  class=\"btn btn-light ms-2\"\n                  @click.prevent=\"addCart(item.id)\"\n                >\n                  <i class=\"bi bi-cart3\"></i>\n                </button>\n              </div>\n            </div>\n            <div class=\"card-footer border-0\">\n              <button type=\"button\" class=\"btn btn-secondary w-100\">\n                查看更多\n              </button>\n            </div>\n          </router-link>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      products: [],\n      allProducts: [],\n      productsCategory: {},\n      selectedTitle: 'All',\n      cart: {},\n      message: '',\n      favorite: JSON.parse(localStorage.getItem('favorite')) || [],\n      favoriteID: JSON.parse(localStorage.getItem('favoriteID')) || []\n    }\n  },\n  inject: ['emitter'],\n  methods: {\n    getProducts() {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/products/all`\n      this.isLoading = true\n      this.$http\n        .get(url)\n        .then((res) => {\n          this.products = res.data.products\n          this.allProducts = [...this.products]\n          this.isLoading = false\n          this.sumProductsCategory()\n          if (this.$route.query.data) {\n            this.selectedCategory(this.$route.query.data)\n          }\n        })\n        .catch((err) => {\n          this.isLoading = false\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: `載入失敗, ${err.message}`\n          })\n        })\n    },\n    // 計算產品類別\n    sumProductsCategory() {\n      this.productsCategory = this.products.reduce(\n        (acc, product) => {\n          acc[product.category] = (acc[product.category] || 0) + 1\n          acc.All = (acc.All || 0) + 1\n          return acc\n        },\n        { All: 0 }\n      )\n    },\n    // 選取產品類別\n    selectedCategory(category) {\n      this.selectedTitle = category\n      if (category === 'All') {\n        this.products = [...this.allProducts]\n      } else {\n        this.products = this.allProducts.filter(\n          (product) => product.category === category\n        )\n      }\n    },\n    addCart(id) {\n      const url = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`\n      this.isLoading = true\n      const cart = {\n        data: {\n          product_id: id,\n          qty: 1\n        }\n      }\n      this.$http\n        .post(url, cart)\n        .then((res) => {\n          this.isLoading = false\n          this.emitter.emit('update-cart')\n          this.$httpMessageState(res, `${res.data.data.product.title} 加入購物車`)\n        })\n        .catch((err) => {\n          this.isLoading = false\n          this.emitter.emit('push-message', {\n            style: 'danger',\n            title: `加入購物車失敗, ${err.message}`\n          })\n        })\n    },\n    addToFavorite(item) {\n      const isSave = this.favoriteID.indexOf(item.id)\n      if (isSave === -1) {\n        this.favorite.push(item)\n        this.favoriteID.push(item.id)\n        this.emitter.emit('push-message', {\n          style: 'success',\n          title: `已將${item.title}新增至收藏`\n        })\n      } else {\n        this.favorite.splice(isSave, 1)\n        this.favoriteID.splice(isSave, 1)\n        this.emitter.emit('push-message', {\n          style: 'danger',\n          title: `已將${item.title}移除收藏`\n        })\n      }\n      localStorage.setItem('favorite', JSON.stringify(this.favorite))\n      localStorage.setItem('favoriteID', JSON.stringify(this.favoriteID))\n      this.emitter.emit('update-favorite')\n    }\n  },\n  created() {\n    this.getProducts()\n  }\n}\n</script>\n","import { render } from \"./UserProductList.vue?vue&type=template&id=397a7e98\"\nimport script from \"./UserProductList.vue?vue&type=script&lang=js\"\nexport * from \"./UserProductList.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","_hoisted_17","type","_createElementBlock","_Fragment","_createVNode","_component_LoadingOverlay","active","$data","isLoading","loader","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_renderList","productsCategory","value","key","href","_normalizeClass","selectedTitle","onClick","_withModifiers","$event","$options","selectedCategory","_toDisplayString","_hoisted_7","_hoisted_8","products","item","id","_component_router_link","to","path","default","_withCtx","src","imageUrl","alt","title","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","category","_hoisted_13","_hoisted_14","_ctx","$filters","currency","price","addToFavorite","favoriteID","includes","_hoisted_15","addCart","_hoisted_18","_hoisted_16","_hoisted_19","_","data","allProducts","cart","message","favorite","JSON","parse","localStorage","getItem","inject","methods","getProducts","url","this","$http","get","then","res","sumProductsCategory","$route","query","catch","err","emitter","emit","reduce","acc","product","All","filter","product_id","qty","post","$httpMessageState","isSave","indexOf","push","splice","setItem","stringify","created","__exports__","render"],"sourceRoot":""}