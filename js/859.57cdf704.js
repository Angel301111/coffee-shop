"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[859],{1859:function(t,e,a){a.r(e),a.d(e,{default:function(){return F}});var i=a(641),s=a(33),l=a(3751);const r=(0,i.Lk)("header",{class:"p-5 text-center bg cart-header-background"},[(0,i.Lk)("h1",{class:"display-1 fw-bold text-light"},"Favorite")],-1),o={class:"container mb-4"},c={key:0},n={class:"d-flex flex-column align-items-center fs-3 my-5"},d=(0,i.Lk)("p",{class:""},"目前沒有收藏任何商品唷 ( ºωº )",-1),u=(0,i.Lk)("p",null,"快點去逛逛吧！",-1),h={key:1,class:"row"},v=["src","alt"],g={class:"card-body"},f={class:"card-title"},p={class:"d-flex"},k={class:"card-text align-self-center"},b=["onClick"],m=(0,i.Lk)("i",{class:"bi bi-heart-fill"},null,-1),L=[m],y=["onClick"],C=(0,i.Lk)("i",{class:"bi bi-cart3"},null,-1),I=[C],S=(0,i.Lk)("div",{class:"card-footer border-0"},[(0,i.Lk)("button",{type:"button",class:"btn btn-secondary w-100"}," 查看更多 ")],-1);function $(t,e,a,m,C,$){const w=(0,i.g2)("LoadingOverlay"),x=(0,i.g2)("router-link");return(0,i.uX)(),(0,i.CE)(i.FK,null,[(0,i.bF)(w,{active:C.isLoading,loader:"dots"},null,8,["active"]),r,(0,i.Lk)("div",o,[null==C.favorite||0==C.favorite.length?((0,i.uX)(),(0,i.CE)("div",c,[(0,i.Lk)("div",n,[d,u,(0,i.bF)(x,{to:"/user/productlist",role:"button",class:"btn btn-dark"},{default:(0,i.k6)((()=>[(0,i.eW)(" 繼續購物 ")])),_:1})])])):((0,i.uX)(),(0,i.CE)("div",h,[((0,i.uX)(!0),(0,i.CE)(i.FK,null,(0,i.pI)(C.favorite,(t=>((0,i.uX)(),(0,i.CE)("div",{class:"col-md-6 col-lg-4 g-4",key:t.id},[(0,i.bF)(x,{class:"card border-0 shadow card-hover",to:{path:`/user/product/${t.id}`}},{default:(0,i.k6)((()=>[(0,i.Lk)("img",{src:t.imageUrl,class:"card-img-top img-fluid object-fit-cover",alt:t.title,style:{height:"30vh"}},null,8,v),(0,i.Lk)("div",g,[(0,i.Lk)("h5",f,(0,s.v_)(t.title),1),(0,i.Lk)("div",p,[(0,i.Lk)("span",k," NT$"+(0,s.v_)(t.price),1),(0,i.Lk)("button",{type:"button",class:"btn btn-light ms-auto",onClick:(0,l.D$)((e=>$.removeFavorite(t)),["prevent"])},L,8,b),(0,i.Lk)("button",{type:"button",class:"btn btn-light ms-2",onClick:(0,l.D$)((e=>$.addCart(t.id)),["prevent"])},I,8,y)])]),S])),_:2},1032,["to"])])))),128))]))])],64)}var w={data(){return{favorite:JSON.parse(localStorage.getItem("favorite"))||[],favoriteID:JSON.parse(localStorage.getItem("favoriteID"))||[],isLoading:!1}},inject:["emitter"],methods:{addCart(t){const e="https://vue3-course-api.hexschool.io/api/angelvue/cart";this.isLoading=!0;const a={data:{product_id:t,qty:1}};this.$http.post(e,a).then((t=>{this.isLoading=!1,this.emitter.emit("update-cart"),this.$httpMessageState(t,`${t.data.data.product.title}加入購物車`)})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:`加入購物車失敗, ${t.message}`})}))},removeFavorite(t){const e=this.favoriteID.indexOf(t.id);this.favorite.splice(e,1),this.favoriteID.splice(e,1),this.emitter.emit("push-message",{style:"danger",title:`已將${t.title}移除收藏`}),localStorage.setItem("favorite",JSON.stringify(this.favorite)),localStorage.setItem("favoriteID",JSON.stringify(this.favoriteID)),this.emitter.emit("update-favorite")}}},x=a(6262);const D=(0,x.A)(w,[["render",$]]);var F=D}}]);
//# sourceMappingURL=859.57cdf704.js.map