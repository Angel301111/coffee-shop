"use strict";(self["webpackChunkhello_world"]=self["webpackChunkhello_world"]||[]).push([[768],{768:function(t,e,s){s.r(e),s.d(e,{default:function(){return K}});var r=s(641),l=s(3751),a=s(33);const d=(0,r.Lk)("header",{class:"p-5 text-center bg cart-header-background"},[(0,r.Lk)("h1",{class:"display-1 fw-bold text-light"},"Order")],-1),n={class:"row justify-content-center"},i=(0,r.Lk)("h2",{class:"text-center my-4 h3"},"─ 結帳流程 ─",-1),o=(0,r.Lk)("div",{class:"progress mb-4",style:{height:"30px"}},[(0,r.Lk)("div",{class:"progress-bar bg-secondary",role:"progressbar",style:{width:"75%"},"aria-valuenow":"75","aria-valuemin":"0","aria-valuemax":"100"}," 確認訂購資訊 ")],-1),u=(0,r.Lk)("h3",{class:"mt-5"},"訂購明細",-1),h={class:"table mt-3"},c=(0,r.Lk)("thead",null,[(0,r.Lk)("th",{class:"th-layout"},"品名"),(0,r.Lk)("th",{class:"th-layout text-end"},"數量"),(0,r.Lk)("th",{class:"th-layout text-end"},"單價")],-1),k={class:"text-end"},L={class:"text-end"},p=(0,r.Lk)("td",{colspan:"2",class:"text-start"},"總計",-1),g={class:"text-end"},m=(0,r.Lk)("h3",{class:"mt-5"},"訂購人資料",-1),y={class:"table mt-3 mb-0"},v=(0,r.Lk)("th",null,"姓名",-1),b=(0,r.Lk)("th",null,"收件人電話",-1),x=(0,r.Lk)("th",null,"Email",-1),f=(0,r.Lk)("th",null,"收件人地址",-1),_=(0,r.Lk)("th",null,"付款狀態",-1),$={key:0},w={key:1,class:"text-success"},C={key:0,class:"text-end"},O=(0,r.Lk)("button",{class:"btn btn-danger my-4",type:"submit"},"確認付款",-1),E=[O];function I(t,e,s,O,I,X){const F=(0,r.g2)("LoadingOverlay");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(F,{active:I.isLoading,loader:"dots"},null,8,["active"]),d,(0,r.Lk)("div",n,[i,(0,r.Lk)("form",{class:"col-md-6",onSubmit:e[0]||(e[0]=(0,l.D$)(((...t)=>X.payOrder&&X.payOrder(...t)),["prevent"]))},[o,u,(0,r.Lk)("table",h,[c,(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(I.order.products,(e=>((0,r.uX)(),(0,r.CE)("tr",{key:e.id},[(0,r.Lk)("td",null,(0,a.v_)(e.product.title),1),(0,r.Lk)("td",k,(0,a.v_)(e.qty),1),(0,r.Lk)("td",L,(0,a.v_)(t.$filters.currency(e.final_total)),1)])))),128))]),(0,r.Lk)("tfoot",null,[(0,r.Lk)("tr",null,[p,(0,r.Lk)("td",g,(0,a.v_)(t.$filters.currency(I.order.total)),1)])])]),m,(0,r.Lk)("table",y,[(0,r.Lk)("tbody",null,[(0,r.Lk)("tr",null,[v,(0,r.Lk)("td",null,(0,a.v_)(I.order.user.name),1)]),(0,r.Lk)("tr",null,[b,(0,r.Lk)("td",null,(0,a.v_)(I.order.user.tel),1)]),(0,r.Lk)("tr",null,[x,(0,r.Lk)("td",null,(0,a.v_)(I.order.user.email),1)]),(0,r.Lk)("tr",null,[f,(0,r.Lk)("td",null,(0,a.v_)(I.order.user.address),1)]),(0,r.Lk)("tr",null,[_,(0,r.Lk)("td",null,[I.order.is_paid?((0,r.uX)(),(0,r.CE)("span",w,"付款完成")):((0,r.uX)(),(0,r.CE)("span",$,"尚未付款"))])])])]),!1===I.order.is_paid?((0,r.uX)(),(0,r.CE)("div",C,E)):(0,r.Q3)("",!0)],32)])],64)}s(4114);var X={data(){return{order:{user:{}},orderId:"",isLoading:!1}},inject:["emitter"],methods:{getOrder(){const t=`https://vue3-course-api.hexschool.io/api/angelvue/order/${this.orderId}`;this.isLoading=!0,this.$http.get(t).then((t=>{this.order=t.data.order,this.isLoading=!1})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:`載入失敗, ${t.message}`})}))},payOrder(){const t=`https://vue3-course-api.hexschool.io/api/angelvue/pay/${this.orderId}`;this.isLoading=!0,this.$http.post(t).then((t=>{this.isLoading=!1,this.$httpMessageState(t,"感謝您的支持！付款"),this.getOrder(),this.$router.push("/user/orderdone")})).catch((t=>{this.isLoading=!1,this.emitter.emit("push-message",{style:"danger",title:`付款失敗, ${t.message}`})}))}},created(){this.orderId=this.$route.params.orderId,this.getOrder()}},F=s(6262);const j=(0,F.A)(X,[["render",I]]);var K=j}}]);
//# sourceMappingURL=768.91e93971.js.map